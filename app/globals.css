/* globals.css - themeable UI + Tailwind base imports */
@import "tailwindcss";
@import "tw-animate-css";

/* Design tokens via CSS variables â€” two themes: light and dark */
:root {
  --radius: 14px;

  /* Light theme defaults */
  --bg: #f7f9fc;
  --panel: #ffffff;
  --muted: #6b7280;
  --text: #0f172a;
  --accent: #0ea5a4; /* teal */
  --accent-foreground: #fff;
  --glass: rgba(255,255,255,0.6);
  --card-shadow: 0 8px 30px rgba(15, 23, 42, 0.08);
  --input-bg: #f1f5f9;
  --input-border: rgba(15,23,42,0.06);
  --bubble-user: linear-gradient(135deg,#0ea5a4 0%,#06b6d4 100%);
  --bubble-assistant: linear-gradient(180deg,#eef2ff 0%,#e9f5ff 100%);
  --bg-gradient: linear-gradient(180deg, rgba(14,165,164,0.06), transparent);
  --glass-border: rgba(255,255,255,0.65);
}

/* Dark theme overrides */
.theme-dark {
  --bg: #0b1220;
  --panel: #0f1724;
  --muted: #94a3b8;
  --text: #e6eef8;
  --accent: #7dd3fc; /* light sky */
  --accent-foreground: #06253a;
  --glass: rgba(255,255,255,0.03);
  --card-shadow: 0 8px 40px rgba(2,6,23,0.7);
  --input-bg: rgba(255,255,255,0.03);
  --input-border: rgba(255,255,255,0.06);
  --bubble-user: linear-gradient(135deg,#0284c7 0%,#06b6d4 100%);
  --bubble-assistant: linear-gradient(180deg,#0b1220 0%,#0f1724 100%);
  --bg-gradient: linear-gradient(180deg, rgba(125,211,252,0.04), transparent);
  --glass-border: rgba(255,255,255,0.06);
}

/* Respect user preference as initial class for new visitors */
@media (prefers-color-scheme: dark) {
  :root:not(.theme-light) { /* only apply when no explicit light set */
    /* runtime: add .theme-dark to html if you wish */
  }
}

/* Tailwind base adjustments */
@layer base {
  html, body, #__next {
    height: 100%;
  }

  body {
    @apply antialiased;
    background: var(--bg);
    color: var(--text);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    transition: background .25s ease, color .25s ease;
  }

  /* Main app container background accent */
  .app-shell {
    background-image: var(--bg-gradient);
    min-height: 100vh;
    padding: 2.25rem;
  }

  /* Chat wrapper card */
  .chat-card {
    background: linear-gradient(180deg, rgba(255,255,255,0.8), rgba(255,255,255,0.6));
    background-color: var(--panel);
    border-radius: var(--radius);
    box-shadow: var(--card-shadow);
    border: 1px solid var(--input-border);
    overflow: hidden;
    transition: box-shadow .2s ease, transform .15s ease;
  }
  .theme-dark .chat-card {
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  }

  /* Header */
  .chat-header {
    padding: 1rem 1.25rem;
    display:flex;
    align-items:center;
    gap: .75rem;
    border-bottom: 1px solid var(--input-border);
    background: linear-gradient(90deg, rgba(255,255,255,0.03), transparent);
  }

  .chat-title {
    font-weight: 600;
    font-size: 1rem;
    letter-spacing: -0.01em;
  }

  .chat-subtitle {
    font-size: 0.85rem;
    color: var(--muted);
  }

  /* Message area */
  .messages-area {
    height: calc(100vh - 320px);
    overflow-y: auto;
    padding: 1.25rem;
    display:flex;
    flex-direction:column;
    gap: .75rem;
    background: transparent;
    scroll-behavior: smooth;
  }

  /* message bubbles */
  .msg-row {
    display:flex;
    gap:.75rem;
    align-items:flex-end;
  }
  .msg-row.user {
    justify-content:flex-end;
  }
  .msg-bubble {
    max-width: 72%;
    padding: .72rem .9rem;
    border-radius: 14px;
    font-size: .95rem;
    line-height: 1.35;
    box-shadow: 0 6px 18px rgba(2,6,23,0.06);
    transition: transform .12s ease, box-shadow .12s ease;
    background: var(--bubble-assistant);
    color: var(--text);
    border: 1px solid rgba(0,0,0,0.02);
  }
  .theme-dark .msg-bubble {
    border: 1px solid rgba(255,255,255,0.03);
  }
  .msg-bubble.user {
    background: var(--bubble-user);
    color: var(--accent-foreground);
    box-shadow: 0 8px 24px rgba(2,6,23,0.25);
  }

  /* Input area */
  .chat-input-wrap {
    padding: 1rem 1.25rem;
    border-top: 1px solid var(--input-border);
    background: linear-gradient(180deg, transparent, rgba(0,0,0,0.01));
  }
  .chat-input {
    width: 100%;
    background: var(--input-bg);
    border: 1px solid var(--input-border);
    border-radius: 999px;
    padding: .65rem 3.5rem .65rem 1rem;
    box-shadow: none;
    transition: box-shadow .12s ease, transform .08s ease;
  }
  .chat-input:focus {
    outline: none;
    box-shadow: 0 6px 20px rgba(14,165,164,0.08);
  }

  .send-button {
    position: absolute;
    right: 1.25rem;
    top: .9rem;
    background: var(--accent);
    color: var(--accent-foreground);
    border-radius: 999px;
    padding: .45rem .55rem;
    border: none;
    display:flex;
    align-items:center;
    justify-content:center;
    box-shadow: 0 6px 18px rgba(14,165,164,0.12);
  }

  /* small util */
  .badge {
    font-size: .75rem;
    padding: .15rem .5rem;
    border-radius: 999px;
    background: rgba(0,0,0,0.06);
    color: var(--muted);
  }

  /* subtle fade near footer/input */
  .message-fade-overlay {
    position:absolute;
    left:0;
    right:0;
    bottom:72px;
    height:42px;
    pointer-events:none;
    background: linear-gradient(180deg, transparent, var(--bg));
  }

  /* small responsive tweaks */
  @media (max-width: 768px) {
    .chat-card { border-radius: 12px; }
    .msg-bubble { max-width: 86%; }
    .messages-area { height: calc(100vh - 300px); }
  }

  /* micro-animations */
  .msg-bubble:hover { transform: translateY(-2px); }
}
